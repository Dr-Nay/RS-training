<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RS COO Executive Leadership Crucible - Lesson 2: CPR Mastery</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
        }

        .logo {
            font-size: 2.5em;
            font-weight: 800;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .executive-framing {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            position: relative;
            overflow: hidden;
        }

        .executive-framing::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }

        .crucible-banner {
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.3);
        }

        .cpr-wheel {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #667eea, #764ba2, #f39c12, #667eea);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2em;
            animation: pulse 2s ease-in-out infinite;
            position: relative;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(102, 126, 234, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(102, 126, 234, 0.8); }
        }

        .cpr-wheel.active {
            animation: spin 1s linear, pulse 2s ease-in-out infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .real-world-anchor {
            background: rgba(243, 156, 18, 0.1);
            border-left: 5px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            position: relative;
        }

        .real-world-anchor::before {
            content: 'üì∞';
            position: absolute;
            left: -15px;
            top: 15px;
            background: #f39c12;
            color: white;
            padding: 5px;
            border-radius: 50%;
            font-size: 0.8em;
        }

        .guided-journal {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #3498db;
            position: relative;
        }

        .journal-prompt {
            font-weight: 600;
            color: #3498db;
            margin-bottom: 10px;
        }

        .guided-prompt {
            background: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-style: italic;
            border-left: 3px solid #3498db;
        }

        .journal-input {
            width: 100%;
            min-height: 80px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            font-family: inherit;
            font-size: 1em;
            line-height: 1.6;
            resize: vertical;
        }

        .assessment-tool {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #3498db;
        }

        .assessment-dimension {
            background: rgba(52, 152, 219, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-slider {
            width: 200px;
            margin: 0 15px;
        }

        .score-display {
            font-weight: bold;
            color: #2c3e50;
            min-width: 80px;
            text-align: center;
        }

        .dashboard-simulator {
            background: #2c3e50;
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-trend {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }

        .knowledge-check {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: #2c3e50;
        }

        .quiz-question {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #3498db;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin: 15px 0;
        }

        .quiz-option {
            background: rgba(52, 152, 219, 0.1);
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            border-color: #3498db;
            background: rgba(52, 152, 219, 0.2);
        }

        .quiz-option.correct {
            background: rgba(46, 204, 113, 0.2);
            border-color: #27ae60;
        }

        .quiz-option.incorrect {
            background: rgba(231, 76, 60, 0.2);
            border-color: #e74c3c;
        }

        .did-you-know {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .did-you-know::before {
            content: 'üí°';
            position: absolute;
            top: -10px;
            left: 20px;
            background: #f39c12;
            padding: 10px;
            border-radius: 50%;
            font-size: 1.2em;
        }

        .competitive-analysis {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .vs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .vs-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .win-rate {
            background: rgba(46, 204, 113, 0.3);
            padding: 10px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }

        .interactive-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .interactive-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .interactive-btn:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .insight-tracker {
            background: linear-gradient(135deg, #f7dc6f 0%, #f4d03f 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: #8b6914;
        }

        .lesson-preview {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .preview-challenge {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #f39c12;
        }

        .ai-coach {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .ai-coach:hover {
            transform: scale(1.1);
        }

        .coach-bubble {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: white;
            color: #2c3e50;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            z-index: 999;
            display: none;
        }

        .progress-tracker {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(52, 152, 219, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #3498db, #2980b9);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .vs-grid,
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .ai-coach {
                bottom: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Enhanced Header with Executive Framing -->
        <div class="header">
            <div class="logo">RENAISSANSE SOLUTIONS</div>
            <h1>COO Executive Leadership Crucible</h1>
            <h2>Lesson 2: CPR Methodology Mastery</h2>
            <div class="crucible-banner">
                <strong>üî• RS'S CRUCIBLE OF CREDIBILITY</strong><br>
                Where COO mastery is forged under fire
            </div>
        </div>

        <!-- Executive Strategic Framing -->
        <div class="executive-framing">
            <h3>üéØ Executive Strategic Context</h3>
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 30px; align-items: center;">
                <div>
                    <h4 style="color: #f39c12; margin-bottom: 15px;">COOs Are Measured Not by Calm Periods, But by How They Navigate Volatility</h4>
                    <p style="font-size: 1.1em; margin-bottom: 15px;">This module sharpens your crisis-to-credibility path through RS's proprietary CPR methodology.</p>
                    
                    <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h5>üéñÔ∏è What Separates Elite COOs:</h5>
                        <ul style="margin-top: 10px;">
                            <li><strong>Systematic Decision-Making:</strong> CPR framework under pressure</li>
                            <li><strong>Stakeholder Orchestration:</strong> Managing competing priorities simultaneously</li>
                            <li><strong>Operational Clairvoyance:</strong> Seeing systemic impacts before they manifest</li>
                            <li><strong>Adaptive Leadership:</strong> Strengthening organizations through disruption</li>
                        </ul>
                    </div>
                </div>
                <div class="cpr-wheel" id="main-cpr-wheel">
                    CPR
                </div>
            </div>
        </div>

        <!-- Real-World Anchors -->
        <div class="content-card">
            <h3>üì∞ Real-World Leadership Lessons</h3>
            
            <div class="real-world-anchor">
                <h5><strong>Boeing's COO Leadership Void Post-737 Crisis</strong></h5>
                <p>Boeing's operational chaos following the 737 MAX crisis demonstrated what happens when COO-level systematic thinking breaks down. Lack of comprehensive operational framework led to cascading failures across safety, production, and stakeholder trust.</p>
                <div style="margin-top: 10px; font-style: italic; color: #7f8c8d;">
                    <strong>RS CPR Application:</strong> Comprehensive stakeholder mapping, Performance prediction systems, Recalibration protocols could have prevented systemic collapse.
                </div>
            </div>

            <div class="real-world-anchor">
                <h5><strong>Starbucks COO Transformation During COVID</strong></h5>
                <p>Starbucks' COO led rapid operational pivots during COVID - drive-thru optimization, digital ordering acceleration, supply chain reconfiguration - demonstrating antifragile operational leadership.</p>
                <div style="margin-top: 10px; font-style: italic; color: #7f8c8d;">
                    <strong>RS CPR Success:</strong> Comprehensive operational redesign, Performance metrics adaptation, Continuous recalibration enabled market leadership during crisis.
                </div>
            </div>

            <div class="real-world-anchor">
                <h5><strong>Tesla's COO-Level Production Hell Recovery</strong></h5>
                <p>Tesla's "production hell" recovery required systematic operational transformation - from factory floor layout to supply chain relationships to quality systems - demonstrating integrated CPR thinking.</p>
                <div style="margin-top: 10px; font-style: italic; color: #7f8c8d;">
                    <strong>RS CPR Model:</strong> Holistic system redesign with embedded learning loops enabled sustainable scaling breakthrough.
                </div>
            </div>
        </div>

        <!-- Enhanced CPR Deep Dive with Visual Integration -->
        <div class="content-card">
            <h3>üîÑ CPR Methodology: The Elite COO Framework</h3>
            <p>Master the three-dimensional approach that transforms operational leaders into strategic transformation architects:</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                <div class="cpr-component" onclick="window.activateCPRComponent('comprehensive')" style="background: rgba(52, 152, 219, 0.1); padding: 25px; border-radius: 15px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div class="cpr-wheel" style="width: 60px; height: 60px; margin-right: 15px; font-size: 0.8em;" id="wheel-c">C</div>
                        <div>
                            <h4>Comprehensive</h4>
                            <p style="color: #7f8c8d;">Holistic Transformation Architecture</p>
                        </div>
                    </div>
                    <p>Four-dimensional integration: Cognitive, Operational, Human, and Performance systems working in concert.</p>
                </div>

                <div class="cpr-component" onclick="window.activateCPRComponent('performance')" style="background: rgba(243, 156, 18, 0.1); padding: 25px; border-radius: 15px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div class="cpr-wheel" style="width: 60px; height: 60px; margin-right: 15px; font-size: 0.8em;" id="wheel-p">P</div>
                        <div>
                            <h4>Performance</h4>
                            <p style="color: #7f8c8d;">Predictive Analytics Engine</p>
                        </div>
                    </div>
                    <p>Three-layer measurement: Predictive indicators, real-time metrics, and outcome measures with 3-6 month forecasting.</p>
                </div>

                <div class="cpr-component" onclick="window.activateCPRComponent('recalibration')" style="background: rgba(46, 204, 113, 0.1); padding: 25px; border-radius: 15px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div class="cpr-wheel" style="width: 60px; height: 60px; margin-right: 15px; font-size: 0.8em;" id="wheel-r">R</div>
                        <div>
                            <h4>Recalibration</h4>
                            <p style="color: #7f8c8d;">Antifragile Systems Design</p>
                        </div>
                    </div>
                    <p>Continuous evolution engine: Sensing, responding, learning, evolving - turning disruption into competitive advantage.</p>
                </div>
            </div>

            <div id="cpr-detailed-exploration" style="display: none; margin-top: 30px;">
                <!-- Dynamic content populated by JavaScript -->
            </div>
        </div>

        <!-- Enhanced Assessment Tool with Fixed Scoring -->
        <div class="assessment-tool">
            <h3>üìä RS CPR Maturity Assessment Tool</h3>
            <p style="margin-bottom: 20px;">Evaluate client readiness across critical transformation dimensions:</p>
            
            <div id="assessment-dimensions">
                <div class="assessment-dimension">
                    <div>
                        <h5>Leadership Alignment</h5>
                        <p style="font-size: 0.9em; color: #7f8c8d;">Executive commitment to transformation</p>
                    </div>
                    <input type="range" class="score-slider" min="1" max="10" value="5" id="leadership-slider" oninput="window.updateDimensionScore('leadership', this.value)">
                    <div class="score-display" id="leadership-display">5/10</div>
                </div>

                <div class="assessment-dimension">
                    <div>
                        <h5>Process Maturity</h5>
                        <p style="font-size: 0.9em; color: #7f8c8d;">Operational systems sophistication</p>
                    </div>
                    <input type="range" class="score-slider" min="1" max="10" value="5" id="process-slider" oninput="window.updateDimensionScore('process', this.value)">
                    <div class="score-display" id="process-display">5/10</div>
                </div>

                <div class="assessment-dimension">
                    <div>
                        <h5>Change Capacity</h5>
                        <p style="font-size: 0.9em; color: #7f8c8d;">Organizational adaptability readiness</p>
                    </div>
                    <input type="range" class="score-slider" min="1" max="10" value="5" id="change-slider" oninput="window.updateDimensionScore('change', this.value)">
                    <div class="score-display" id="change-display">5/10</div>
                </div>

                <div class="assessment-dimension">
                    <div>
                        <h5>Data Infrastructure</h5>
                        <p style="font-size: 0.9em; color: #7f8c8d;">Analytics and measurement capability</p>
                    </div>
                    <input type="range" class="score-slider" min="1" max="10" value="5" id="data-slider" oninput="window.updateDimensionScore('data', this.value)">
                    <div class="score-display" id="data-display">5/10</div>
                </div>
            </div>

            <div style="background: rgba(52, 152, 219, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4>Assessment Results:</h4>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0;">
                    <span><strong>Overall Readiness Score:</strong></span>
                    <span id="overall-score" style="font-size: 1.5em; color: #3498db; font-weight: bold;">5.0/10</span>
                </div>
                <div id="readiness-recommendation" style="padding: 15px; background: white; border-radius: 8px; margin-top: 15px;">
                    <strong>Recommendation:</strong> Adjust assessment parameters to see implementation recommendations.
                </div>
            </div>

            <button class="interactive-btn" onclick="window.generateDetailedAssessmentReport()">
                üìä Generate Comprehensive Assessment Report
            </button>
        </div>

        <!-- Enhanced Client Dashboard with Working Metrics -->
        <div class="dashboard-simulator">
            <h3>üìà RS Client Engagement Dashboard</h3>
            <p style="margin-bottom: 20px;">Monitor real-time transformation metrics across your client portfolio:</p>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="engagement-metric" style="color: #27ae60;">87%</div>
                    <div>Stakeholder Engagement</div>
                    <div class="metric-trend" id="engagement-trend">‚Üó +5% this week</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value" id="milestone-metric" style="color: #f39c12;">73%</div>
                    <div>Milestone Progress</div>
                    <div class="metric-trend" id="milestone-trend">‚Üò -2% behind schedule</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value" id="risk-metric" style="color: #e74c3c;">3</div>
                    <div>Active Risk Alerts</div>
                    <div class="metric-trend" id="risk-trend">‚ö† Requires attention</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value" id="utilization-metric" style="color: #3498db;">94%</div>
                    <div>Team Utilization</div>
                    <div class="metric-trend" id="utilization-trend">‚û° Optimal range</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value" id="satisfaction-metric" style="color: #9b59b6;">4.7</div>
                    <div>Client Satisfaction</div>
                    <div class="metric-trend" id="satisfaction-trend">‚Üó +0.3 this month</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value" id="revenue-metric" style="color: #1abc9c;">$2.4M</div>
                    <div>Implementation Value</div>
                    <div class="metric-trend" id="revenue-trend">üí∞ On target</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="interactive-btn" onclick="window.refreshClientDashboard()">
                    üîÑ Refresh Metrics
                </button>
                <button class="interactive-btn" onclick="window.generateComprehensiveRiskReport()">
                    ‚ö† Generate Risk Analysis
                </button>
                <button class="interactive-btn" onclick="window.exportDashboardData()">
                    üì§ Export Dashboard Data
                </button>
            </div>
        </div>

        <!-- Did You Know Section -->
        <div class="did-you-know">
            <h3 style="margin-top: 10px;">Did You Know?</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
                    <h5>üèÜ Fortune 500 COO Tenure</h5>
                    <p>Average COO tenure at Fortune 500 companies is only 2.3 years. Those using systematic frameworks like CPR average 4.1 years and 67% higher performance ratings.</p>
                </div>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
                    <h5>üìä Transformation Success Rates</h5>
                    <p>McKinsey reports 70% of transformations fail. Organizations using comprehensive methodology (like CPR) show 85% success rates with 40% faster implementation.</p>
                </div>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
                    <h5>üí∞ ROI of Systematic Operations</h5>
                    <p>Companies with systematic operational frameworks generate 25% higher EBITDA and 33% better stakeholder satisfaction compared to ad-hoc management approaches.</p>
                </div>
            </div>
        </div>

        <!-- Enhanced Competitive Analysis -->
        <div class="competitive-analysis">
            <h3>‚öîÔ∏è Competitive Mastery: RS vs. The Big 3</h3>
            <p style="margin-bottom: 20px;">Master the messaging that wins Fortune 500 engagements against McKinsey, Bain, and BCG:</p>

            <div class="vs-grid">
                <div class="vs-card">
                    <h4>üèõÔ∏è McKinsey & Company</h4>
                    <div style="margin: 15px 0;">
                        <p><strong>Their Strategy:</strong> Blue-chip prestige with rigorous analytical frameworks</p>
                        <p><strong>Their Weakness:</strong> Strategy without execution - beautiful PowerPoints that collect dust</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üéØ RS Competitive Advantage:</h5>
                        <ul style="margin-top: 8px;">
                            <li><strong>Embedded Implementation:</strong> We execute and embed capability</li>
                            <li><strong>Speed to Results:</strong> 6-month transformations vs. 18-month strategies</li>
                            <li><strong>Measurable ROI:</strong> Guaranteed metrics vs. theoretical frameworks</li>
                            <li><strong>Sustainable Change:</strong> Antifragile systems vs. one-time improvements</li>
                        </ul>
                    </div>
                    
                    <div class="win-rate">
                        üìä Win Rate vs McKinsey: 73%<br>
                        <small>Fortune 500 competitive RFPs (2023-2024)</small>
                    </div>
                </div>
                
                <div class="vs-card">
                    <h4>üéØ Bain & Company</h4>
                    <div style="margin: 15px 0;">
                        <p><strong>Their Strategy:</strong> Results-oriented consulting with strong partner engagement</p>
                        <p><strong>Their Weakness:</strong> Traditional consulting model - recommend then leave</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üéØ RS Competitive Advantage:</h5>
                        <ul style="margin-top: 8px;">
                            <li><strong>True Partnership:</strong> Embedded until transformation complete</li>
                            <li><strong>Capability Transfer:</strong> Your team becomes expert practitioners</li>
                            <li><strong>Continuous Evolution:</strong> Recalibration vs. static improvements</li>
                            <li><strong>Predictive Systems:</strong> Prevent problems vs. react to them</li>
                        </ul>
                    </div>
                    
                    <div class="win-rate">
                        üìä Win Rate vs Bain: 68%<br>
                        <small>Mid-market transformations (2023-2024)</small>
                    </div>
                </div>
                
                <div class="vs-card">
                    <h4>üî¨ Boston Consulting Group</h4>
                    <div style="margin: 15px 0;">
                        <p><strong>Their Strategy:</strong> Innovation leadership and digital transformation expertise</p>
                        <p><strong>Their Weakness:</strong> Technology focus without operational integration depth</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üéØ RS Competitive Advantage:</h5>
                        <ul style="margin-top: 8px;">
                            <li><strong>Holistic Integration:</strong> Technology + operations + culture + performance</li>
                            <li><strong>Antifragile Design:</strong> Systems improve through disruption</li>
                            <li><strong>Implementation Velocity:</strong> 3x faster deployment, higher adoption</li>
                            <li><strong>Sustainable Innovation:</strong> Embedded capability vs. project-based</li>
                        </ul>
                    </div>
                    
                    <div class="win-rate">
                        üìä Win Rate vs BCG: 71%<br>
                        <small>Technology sector transformations (2023-2024)</small>
                    </div>
                </div>
            </div>

            <!-- Objection Handling Practice -->
            <div style="background: rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 25px; margin: 20px 0;">
                <h4>üí¨ Executive Objection Mastery</h4>
                <p>Practice responding to real Fortune 500 C-suite objections:</p>
                
                <div style="display: grid; gap: 15px; margin: 20px 0;">
                    <div class="objection-scenario" onclick="window.handleExecutiveObjection('cost')" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                        <strong>"Your CPR approach costs 40% more than McKinsey"</strong>
                        <p style="font-style: italic; margin-top: 5px;">- CFO at Fortune 100 Manufacturing Company</p>
                    </div>
                    
                    <div class="objection-scenario" onclick="window.handleExecutiveObjection('proof')" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                        <strong>"Can you prove CPR works better than traditional consulting?"</strong>
                        <p style="font-style: italic; margin-top: 5px;">- CEO at Tech Unicorn preparing for IPO</p>
                    </div>
                    
                    <div class="objection-scenario" onclick="window.handleExecutiveObjection('time')" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
                        <strong>"We don't have time for another methodology"</strong>
                        <p style="font-style: italic; margin-top: 5px;">- COO at Retail Giant during digital transformation</p>
                    </div>
                </div>
                
                <div id="objection-response-framework" style="display: none; margin-top: 20px;">
                    <!-- Response framework populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Enhanced Guided Journal with Strategic Prompts -->
        <div class="guided-journal">
            <div class="journal-prompt">üß† Strategic Leadership Integration</div>
            
            <div class="guided-prompt">
                "I am noticing a pattern of..." (How do these competitive advantages connect to your operational leadership style?)
            </div>
            <textarea class="journal-input" id="pattern-recognition" placeholder="Reflect on patterns you observe in successful vs. struggling operational transformations..."></textarea>
            
            <div class="guided-prompt">
                "The most neglected stakeholder in operational transformations is likely... because..."
            </div>
            <textarea class="journal-input" id="stakeholder-analysis" placeholder="Consider which stakeholder groups are often overlooked and why this creates systemic risk..."></textarea>
            
            <div class="guided-prompt">
                "If I choose CPR methodology for my next transformation, the likely downstream effect on organizational capability is..."
            </div>
            <textarea class="journal-input" id="downstream-effects" placeholder="Think through the long-term organizational capability implications of systematic vs. ad-hoc approaches..."></textarea>
        </div>

        <!-- Knowledge Check: COO Operational Mastery -->
        <div class="knowledge-check">
            <h3>üß† Knowledge Check: COO Operational Mastery</h3>
            <p>Test your understanding of elite COO decision-making frameworks:</p>
            
            <div class="quiz-question">
                <h5>Scenario: Your largest client is 3 weeks behind on implementation milestones due to stakeholder resistance. The CEO is demanding immediate recovery. Which CPR-based response demonstrates elite COO thinking?</h5>
                <div class="quiz-options" id="mastery-quiz-1">
                    <div class="quiz-option" onclick="window.selectMasteryOption(1, 0)">
                        A) Accelerate implementation timeline to catch up
                    </div>
                    <div class="quiz-option" onclick="window.selectMasteryOption(1, 1)">
                        B) Deploy comprehensive stakeholder recalibration while maintaining systematic approach
                    </div>
                    <div class="quiz-option" onclick="window.selectMasteryOption(1, 2)">
                        C) Escalate to senior RS leadership for intervention
                    </div>
                    <div class="quiz-option" onclick="window.selectMasteryOption(1, 3)">
                        D) Reduce scope to meet original timeline
                    </div>
                </div>
                <div id="mastery-feedback-1" style="display: none; margin-top: 15px;"></div>
            </div>

            <div class="quiz-question">
                <h5>A Fortune 500 board asks: "How is your approach different from McKinsey's recent strategic recommendations?" Your most effective response:</h5>
                <div class="quiz-options" id="mastery-quiz-2">
                    <div class="quiz-option" onclick="window.selectMasteryOption(2, 0)">
                        A) "We're more experienced in your industry"
                    </div>
                    <div class="quiz-option" onclick="window.selectMasteryOption(2, 1)">
                        B) "McKinsey creates strategies; RS embeds executable capability that makes you independent"
                    </div>
                    <div class="quiz-option" onclick="window.selectMasteryOption(2, 2)">
                        C) "Our methodology is more comprehensive"
                    </div>
                    <div class="quiz-option" onclick="window.selectMasteryOption(2, 3)">
                        D) "We deliver faster results"
                    </div>
                </div>
                <div id="mastery-feedback-2" style="display: none; margin-top: 15px;"></div>
            </div>
        </div>

        <!-- Progress Tracking -->
        <div class="progress-tracker">
            <h3>üìä CPR Mastery Progress</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                <div>
                    <h5>Framework Understanding</h5>
                    <div class="progress-bar">
                        <div class="progress-fill" id="framework-progress" style="width: 75%;"></div>
                    </div>
                    <div id="framework-status">75% - Good Foundation</div>
                </div>
                
                <div>
                    <h5>Tool Proficiency</h5>
                    <div class="progress-bar">
                        <div class="progress-fill" id="tools-progress" style="width: 60%;"></div>
                    </div>
                    <div id="tools-status">60% - Developing</div>
                </div>
                
                <div>
                    <h5>Competitive Positioning</h5>
                    <div class="progress-bar">
                        <div class="progress-fill" id="competitive-progress" style="width: 85%;"></div>
                    </div>
                    <div id="competitive-status">85% - Strong</div>
                </div>
                
                <div>
                    <h5>Leadership Application</h5>
                    <div class="progress-bar">
                        <div class="progress-fill" id="leadership-progress" style="width: 70%;"></div>
                    </div>
                    <div id="leadership-status">70% - Progressing</div>
                </div>
            </div>
            
            <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; text-align: center;">
                <strong>Overall CPR Mastery: <span id="overall-mastery">72%</span></strong>
                <div style="margin-top: 10px;">
                    <button class="interactive-btn" onclick="window.validateCompleteCPRMastery()" id="final-validation-btn">
                        üéì Validate Complete CPR Mastery
                    </button>
                </div>
            </div>
        </div>

        <!-- Insight Tracker -->
        <div class="insight-tracker">
            <h3>üß† Personal Leadership Insight Tracker</h3>
            <p>Your responses are being compiled into a personalized COO leadership blueprint:</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                <div style="background: rgba(139, 105, 20, 0.1); padding: 15px; border-radius: 8px;">
                    <h5>üéØ Leadership Patterns Identified</h5>
                    <div id="pattern-insights">Complete guided journal prompts to unlock insights</div>
                </div>
                
                <div style="background: rgba(139, 105, 20, 0.1); padding: 15px; border-radius: 8px;">
                    <h5>‚ö° Operational Strengths</h5>
                    <div id="strength-insights">Engage with assessment tools to reveal strengths</div>
                </div>
                
                <div style="background: rgba(139, 105, 20, 0.1); padding: 15px; border-radius: 8px;">
                    <h5>üöÄ Development Opportunities</h5>
                    <div id="development-insights">Complete knowledge checks to identify growth areas</div>
                </div>
            </div>
            
            <button class="interactive-btn" onclick="window.generateLeadershipBlueprint()">
                üìã Generate Personal Leadership Blueprint
            </button>
        </div>

        <!-- Enhanced Coming Up: Lesson 3 with TalentLMS Integration -->
        <div class="lesson-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); text-align: center;">
            <div style="padding: 40px;">
                <div style="font-size: 2em; margin-bottom: 15px;">üöÄ</div>
                <h2 style="color: white; margin-bottom: 20px;">Coming Up in Lesson 3</h2>
                <h3 style="color: #f39c12; margin-bottom: 20px;">Cross-Department Integration & Executive Training Mastery</h3>
                
                <p style="font-size: 1.2em; margin-bottom: 30px; line-height: 1.6;">
                    Transform from CPR expert to CPR educator. Master the art of training RS department heads and building internal consulting excellence that makes your organization unstoppable in competitive situations.
                </p>
                
                <div style="background: rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 30px; margin: 30px 0;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; border-left: 4px solid #f39c12;">
                            <h4 style="color: #f39c12; margin-bottom: 10px;">üéØ Sales Team Empowerment</h4>
                            <p>Enable your sales team to confidently present CPR advantages to Fortune 500 prospects and win against McKinsey presentations</p>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; border-left: 4px solid #27ae60;">
                            <h4 style="color: #2ecc71; margin-bottom: 10px;">üîß Operations Excellence</h4>
                            <p>Build operational teams that live and breathe CPR methodology in daily execution, creating sustainable competitive advantage</p>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; border-left: 4px solid #3498db;">
                            <h4 style="color: #3498db; margin-bottom: 10px;">üìä Analytics Integration</h4>
                            <p>Create analytics capability that supports CPR performance measurement and continuous organizational recalibration</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pre-Lesson 3 Challenge (Enhanced with TalentLMS Styling) -->
        <div style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); color: white; border-radius: 15px; padding: 30px; margin: 25px 0; text-align: center;">
            <div style="font-size: 1.5em; margin-bottom: 15px;">üí°</div>
            <h3 style="margin-bottom: 20px;">Pre-Lesson 3 Challenge:</h3>
            <h4 style="color: #2c3e50; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; margin: 20px 0;">
                Design a 90-Minute Sales Team Training Session
            </h4>
            
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left;">
                <p style="margin-bottom: 15px;"><strong>Strategic Preparation Challenge:</strong> Create a training session that enables your sales team to confidently differentiate RS's CPR approach from McKinsey's traditional consulting in Fortune 500 boardroom presentations.</p>
                
                <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h5 style="color: #f39c12; margin-bottom: 10px;">Your Training Session Must Include:</h5>
                    <ul style="margin-left: 20px;">
                        <li><strong>üéØ Opening Hook:</strong> Capture C-suite attention in first 2 minutes</li>
                        <li><strong>üìä Competitive Edge:</strong> Clear RS vs. Big 3 positioning with proof points</li>
                        <li><strong>üõ†Ô∏è Live Demonstration:</strong> Interactive CPR assessment or dashboard showcase</li>
                        <li><strong>üí° Objection Mastery:</strong> Practice with real executive pushback scenarios</li>
                        <li><strong>üé≠ Boardroom Simulation:</strong> High-pressure presentation practice</li>
                    </ul>
                </div>
            </div>
            
            <div style="background: white; border-radius: 10px; padding: 20px; margin: 20px 0; color: #2c3e50;">
                <textarea style="width: 100%; height: 120px; border: 2px solid #f39c12; border-radius: 8px; padding: 15px; font-size: 1em; resize: vertical;" 
                          id="lesson3-prep-challenge" 
                          placeholder="Design your 90-minute sales team training session. Focus on building confidence to compete against McKinsey in Fortune 500 boardrooms. Include specific exercises, role-plays, and proof points..."></textarea>
            </div>
            
            <button class="interactive-btn" onclick="window.submitLesson3Prep()" style="background: linear-gradient(45deg, #27ae60, #2ecc71); font-size: 1.1em; padding: 15px 30px;">
                üìã Accept Challenge
            </button>
        </div>

        <!-- Continue to Lesson 3 Button (TalentLMS Style) -->
        <div style="text-align: center; margin: 40px 0; padding: 30px;">
            <div style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                <div style="color: white; margin-bottom: 30px;">
                    <h3 style="margin-bottom: 15px;">üéì CPR Mastery Complete!</h3>
                    <p style="font-size: 1.1em; opacity: 0.9;">You've mastered the fundamentals. Ready to become a CPR educator and transformation leader?</p>
                </div>
                
                <button onclick="window.navigateToLesson3()" style="
                    background: linear-gradient(45deg, #667eea, #764ba2);
                    color: white;
                    border: none;
                    padding: 20px 40px;
                    border-radius: 50px;
                    font-size: 1.3em;
                    font-weight: 600;
                    cursor: pointer;
                    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
                    transition: all 0.3s ease;
                    margin: 10px;
                " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 35px rgba(102, 126, 234, 0.6)'" 
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(102, 126, 234, 0.4)'">
                    Continue to Lesson 3 ‚Üí
                </button>
                
                <div style="margin-top: 20px; font-size: 0.9em; color: #bdc3c7;">
                    <p>üìä Progress: Lesson 2 of 8 Complete</p>
                </div>
            </div>
        </div>

        <!-- AI Coach -->
        <div class="ai-coach" onclick="window.toggleAICoach()">
            ü§ñ RS Coach
        </div>
        
        <div class="coach-bubble" id="coach-bubble">
            <div id="coach-message">Click elements to receive contextual guidance on CPR mastery and leadership application.</div>
            <button onclick="window.toggleAICoach()" style="float: right; background: none; border: none; cursor: pointer;">‚úï</button>
        </div>
    </div>

    <script>
        // Enhanced Global State Management
        window.assessmentData = {
            leadership: 5,
            process: 5,
            change: 5,
            data: 5
        };

        window.dashboardMetrics = {
            engagement: { value: 87, trend: '‚Üó +5% this week' },
            milestone: { value: 73, trend: '‚Üò -2% behind schedule' },
            risk: { value: 3, trend: '‚ö† Requires attention' },
            utilization: { value: 94, trend: '‚û° Optimal range' },
            satisfaction: { value: 4.7, trend: '‚Üó +0.3 this month' },
            revenue: { value: 2.4, trend: 'üí∞ On target' }
        };

        window.progressTracking = {
            framework: 75,
            tools: 60,
            competitive: 85,
            leadership: 70
        };

        window.userInsights = {
            patterns: [],
            strengths: [],
            developments: []
        };

        window.completedActivities = new Set();

        // Enhanced CPR Component Activation
        window.activateCPRComponent = function(component) {
            // Activate visual feedback
            const wheel = document.getElementById(`wheel-${component.charAt(0).toLowerCase()}`);
            const mainWheel = document.getElementById('main-cpr-wheel');
            
            if (wheel) {
                wheel.classList.add('active');
                setTimeout(() => wheel.classList.remove('active'), 1000);
            }
            
            if (mainWheel) {
                mainWheel.classList.add('active');
                setTimeout(() => mainWheel.classList.remove('active'), 1000);
            }

            // Highlight selected component
            document.querySelectorAll('.cpr-component').forEach(comp => {
                comp.style.borderColor = 'transparent';
                comp.style.background = comp.style.background.replace('0.2', '0.1');
            });
            
            event.target.closest('.cpr-component').style.borderColor = '#3498db';
            event.target.closest('.cpr-component').style.background = event.target.closest('.cpr-component').style.background.replace('0.1', '0.2');

            const detailedContent = window.getCPRDetailedContent(component);
            const explorationDiv = document.getElementById('cpr-detailed-exploration');
            
            explorationDiv.innerHTML = detailedContent;
            explorationDiv.style.display = 'block';
            
            // Update progress
            window.updateProgress('framework', Math.min(window.progressTracking.framework + 5, 100));
            window.completedActivities.add(`cpr-${component}`);
            
            // AI Coach feedback
            window.showAICoachMessage(`Excellent! You've activated the ${component} component. Notice how this integrates with the other CPR dimensions.`);
        }

        window.getCPRDetailedContent = function(component) {
            const contents = {
                comprehensive: `
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 25px; border-radius: 15px;">
                        <h4>üèóÔ∏è Comprehensive: Four-Dimensional Transformation Architecture</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #3498db;">
                                <h5>üß† Cognitive Systems</h5>
                                <p>Mental models, decision frameworks, organizational learning capacity</p>
                                <strong>COO Application:</strong> Redesign strategic planning for rapid iteration cycles
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #27ae60;">
                                <h5>‚öôÔ∏è Operational Systems</h5>
                                <p>Workflows, processes, technology integration, quality controls</p>
                                <strong>COO Application:</strong> Implement predictive quality systems across operations
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #e67e22;">
                                <h5>üë• Human Systems</h5>
                                <p>Culture, capabilities, communication, collaboration patterns</p>
                                <strong>COO Application:</strong> Build cross-functional teams with embedded accountability
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #9b59b6;">
                                <h5>üìä Performance Systems</h5>
                                <p>Metrics, accountability, feedback loops, continuous improvement</p>
                                <strong>COO Application:</strong> Deploy real-time dashboards with predictive alerts
                            </div>
                        </div>
                        <div style="background: rgba(52, 152, 219, 0.2); padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <strong>Elite COO Insight:</strong> Unlike traditional consulting that addresses symptoms, comprehensive CPR creates systemic change that prevents problems from recurring. You orchestrate transformation across all four dimensions simultaneously.
                        </div>
                    </div>
                `,
                performance: `
                    <div style="background: rgba(243, 156, 18, 0.1); padding: 25px; border-radius: 15px;">
                        <h4>üìà Performance: Three-Layer Predictive Analytics Engine</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #1abc9c;">
                                <h5>üîÆ Predictive Layer (3-6 months ahead)</h5>
                                <ul>
                                    <li>Employee engagement velocity</li>
                                    <li>Process adoption rates</li>
                                    <li>Innovation pipeline health</li>
                                    <li>Market responsiveness indicators</li>
                                </ul>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #f39c12;">
                                <h5>‚ö° Real-Time Layer (Live to daily)</h5>
                                <ul>
                                    <li>Productivity indices</li>
                                    <li>Quality scores</li>
                                    <li>Customer satisfaction</li>
                                    <li>Resource utilization</li>
                                </ul>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #e74c3c;">
                                <h5>üéØ Outcome Layer (Monthly to quarterly)</h5>
                                <ul>
                                    <li>Revenue per employee</li>
                                    <li>Competitive advantage metrics</li>
                                    <li>Stakeholder value creation</li>
                                    <li>Market position strength</li>
                                </ul>
                            </div>
                        </div>
                        <div style="background: rgba(243, 156, 18, 0.2); padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <strong>Elite COO Insight:</strong> Performance systems that predict problems before they occur and demonstrate clear ROI to skeptical executives. You become the COO who prevents crises rather than managing them.
                        </div>
                    </div>
                `,
                recalibration: `
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 25px; border-radius: 15px;">
                        <h4>üîÑ Recalibration: Four-Stage Antifragile Engine</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #e74c3c;">
                                <h5>üîç Sensing</h5>
                                <p>Early detection systems for performance anomalies, market shifts, competitive moves, internal stress points</p>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #f39c12;">
                                <h5>‚ö° Responding</h5>
                                <p>Rapid adjustment protocols: escalation triggers, resource reallocation, process modifications</p>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #3498db;">
                                <h5>üß† Learning</h5>
                                <p>Systematic insight capture: pattern recognition, root cause analysis, best practice extraction</p>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #27ae60;">
                                <h5>üöÄ Evolving</h5>
                                <p>Continuous strengthening: capability enhancement, system optimization, resilience building</p>
                            </div>
                        </div>
                        <div style="background: rgba(46, 204, 113, 0.2); padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <strong>Elite COO Insight:</strong> Build organizations that get stronger through stress - turning market volatility and competitive pressure into competitive advantages. You create antifragile enterprises.
                        </div>
                    </div>
                `
            };
            return contents[component] || '';
        }

        // Fixed Assessment Tool Functions
        window.updateDimensionScore = function(dimension, value) {
            window.assessmentData[dimension] = parseInt(value);
            document.getElementById(`${dimension}-display`).textContent = `${value}/10`;
            
            const overall = Object.values(window.assessmentData).reduce((a, b) => a + b, 0) / 4;
            document.getElementById('overall-score').textContent = `${overall.toFixed(1)}/10`;
            
            window.updateReadinessRecommendation(overall);
            window.updateProgress('tools', Math.min(overall * 10, 100));
        }

        window.updateReadinessRecommendation = function(score) {
            const recommendations = {
                high: 'üöÄ <strong>High Readiness:</strong> Proceed with accelerated implementation. Client shows excellent transformation capacity with strong leadership alignment and robust systems.',
                good: '‚úÖ <strong>Good Readiness:</strong> Standard implementation recommended. Focus on strengthening data infrastructure and change management protocols.',
                moderate: '‚ö†Ô∏è <strong>Moderate Readiness:</strong> Pre-implementation preparation required. Prioritize leadership alignment and process maturity development.',
                low: 'üî¥ <strong>Low Readiness:</strong> Extensive preparation phase needed. Consider readiness-building engagement focusing on foundational capabilities.'
            };
            
            let recommendation;
            if (score >= 8) recommendation = recommendations.high;
            else if (score >= 6) recommendation = recommendations.good;
            else if (score >= 4) recommendation = recommendations.moderate;
            else recommendation = recommendations.low;
            
            document.getElementById('readiness-recommendation').innerHTML = recommendation;
        }

        window.generateDetailedAssessmentReport = function() {
            const overall = Object.values(window.assessmentData).reduce((a, b) => a + b, 0) / 4;
            
            window.createModal('CPR Maturity Assessment Report', `
                <div style="font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.6; color: #2c3e50;">
                    <strong>üìä RS CPR MATURITY ASSESSMENT REPORT</strong><br>
                    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br><br>
                    
                    <strong>üè¢ CLIENT PROFILE:</strong><br>
                    Assessment Date: ${new Date().toLocaleDateString()}<br>
                    Overall Readiness Score: <strong>${overall.toFixed(1)}/10</strong><br>
                    Assessment Confidence: High<br><br>
                    
                    <strong>üìã DIMENSIONAL ANALYSIS:</strong><br>
                    ‚Ä¢ Leadership Alignment: ${window.assessmentData.leadership}/10 ${window.assessmentData.leadership >= 7 ? '‚úÖ Strong' : '‚ö†Ô∏è Needs attention'}<br>
                    ‚Ä¢ Process Maturity: ${window.assessmentData.process}/10 ${window.assessmentData.process >= 7 ? '‚úÖ Advanced' : '‚ö†Ô∏è Development required'}<br>
                    ‚Ä¢ Change Capacity: ${window.assessmentData.change}/10 ${window.assessmentData.change >= 7 ? '‚úÖ Ready' : '‚ö†Ô∏è Preparation needed'}<br>
                    ‚Ä¢ Data Infrastructure: ${window.assessmentData.data}/10 ${window.assessmentData.data >= 7 ? '‚úÖ Robust' : '‚ö†Ô∏è Enhancement required'}<br><br>
                    
                    <strong>üéØ IMPLEMENTATION RECOMMENDATION:</strong><br>
                    ${overall >= 8 ? 'üöÄ ACCELERATED TRACK: High readiness enables fast-track implementation' : 
                      overall >= 6 ? '‚úÖ STANDARD TRACK: Good readiness supports standard implementation' :
                      overall >= 4 ? '‚ö†Ô∏è PREPARATION TRACK: Moderate readiness requires pre-implementation phase' :
                      'üî¥ READINESS-BUILDING TRACK: Extensive preparation required'}<br><br>
                    
                    <strong>üìà PROJECTED OUTCOMES:</strong><br>
                    ‚Ä¢ Implementation Timeline: ${overall >= 7 ? '6-9 months' : overall >= 5 ? '9-12 months' : '12-18 months'}<br>
                    ‚Ä¢ Success Probability: ${Math.round(overall * 10 + 20)}%<br>
                    ‚Ä¢ ROI Realization: ${overall >= 7 ? 'Month 3-4' : overall >= 5 ? 'Month 6-8' : 'Month 12+'}<br>
                    ‚Ä¢ Risk Level: ${overall >= 7 ? 'Low' : overall >= 5 ? 'Medium' : 'High'}<br><br>
                    
                    <strong>üõ†Ô∏è RECOMMENDED RS TOOLS:</strong><br>
                    ${overall >= 7 ? '‚Ä¢ Implementation Planner (Fast-track mode)\n‚Ä¢ Real-time Dashboard\n‚Ä¢ Advanced Analytics' : 
                      overall >= 5 ? '‚Ä¢ Stakeholder Alignment Workshop\n‚Ä¢ Standard Dashboard\n‚Ä¢ Progress Tracking' :
                      '‚Ä¢ Readiness Building Program\n‚Ä¢ Leadership Alignment Sessions\n‚Ä¢ Foundation Assessment'}<br><br>
                    
                    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br>
                    Report Generated: ${new Date().toLocaleDateString()}<br>
                    RS Consultant: COO Training Participant
                </div>
            `, 'assessment');
            
            window.completedActivities.add('assessment-report');
            window.updateProgress('tools', Math.min(window.progressTracking.tools + 15, 100));
        }

        // Enhanced Dashboard Functions
        window.refreshClientDashboard = function() {
            const variations = {
                engagement: { values: [82, 87, 91, 89, 85], trends: ['‚Üó +3%', '‚Üó +5%', '‚Üò -2%', '‚û° stable'] },
                milestone: { values: [68, 73, 79, 71, 75], trends: ['‚Üó +7%', '‚Üò -2%', '‚û° on track', '‚Üó +4%'] },
                risk: { values: [2, 3, 4, 1, 5], trends: ['‚ö† new risks', '‚úÖ resolved', '‚û° monitoring', 'üî¥ critical'] },
                utilization: { values: [89, 94, 97, 91, 85], trends: ['‚Üó increasing', '‚Üò reducing', '‚û° optimal', '‚ö† overloaded'] },
                satisfaction: { values: [4.3, 4.7, 4.9, 4.5, 4.8], trends: ['‚Üó +0.2', '‚Üó +0.3', '‚Üò -0.1', '‚û° stable'] },
                revenue: { values: [2.1, 2.4, 2.8, 2.2, 2.6], trends: ['üí∞ ahead', 'üí∞ on target', '‚ö† behind', 'üöÄ exceeding'] }
            };

            Object.keys(variations).forEach(metric => {
                const data = variations[metric];
                const randomValue = data.values[Math.floor(Math.random() * data.values.length)];
                const randomTrend = data.trends[Math.floor(Math.random() * data.trends.length)];
                
                const valueElement = document.getElementById(`${metric}-metric`);
                const trendElement = document.getElementById(`${metric}-trend`);
                
                if (metric === 'risk') {
                    valueElement.textContent = randomValue;
                } else if (metric === 'satisfaction') {
                    valueElement.textContent = randomValue.toFixed(1);
                } else if (metric === 'revenue') {
                    valueElement.textContent = `${randomValue}M`;
                } else {
                    valueElement.textContent = `${randomValue}%`;
                }
                
                trendElement.textContent = randomTrend;
                
                // Update stored values
                window.dashboardMetrics[metric] = { value: randomValue, trend: randomTrend };
            });
            
            window.completedActivities.add('dashboard-refresh');
            window.updateProgress('tools', Math.min(window.progressTracking.tools + 10, 100));
            window.showAICoachMessage('Dashboard refreshed! Notice how real-time metrics enable proactive decision-making.');
        }

        window.generateComprehensiveRiskReport = function() {
            const riskLevel = window.dashboardMetrics.risk.value;
            const riskContent = `
                <strong>üö® CLIENT ENGAGEMENT RISK ANALYSIS</strong><br>
                ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br><br>
                
                <strong>üìä CURRENT RISK PROFILE:</strong><br>
                Active Risk Alerts: ${riskLevel}<br>
                Overall Risk Level: ${riskLevel <= 2 ? 'LOW' : riskLevel <= 3 ? 'MEDIUM' : 'HIGH'}<br>
                Last Updated: ${new Date().toLocaleString()}<br><br>
                
                <strong>üî¥ CRITICAL RISKS:</strong><br>
                ${riskLevel >= 4 ? '1. Stakeholder Resistance in Implementation Phase 2\n   ‚Ä¢ Impact: High - Could derail entire transformation\n   ‚Ä¢ Probability: 65% ‚Ä¢ Mitigation: Emergency stakeholder engagement\n\n2. Resource Allocation Conflicts\n   ‚Ä¢ Impact: Medium-High - Timeline delays likely\n   ‚Ä¢ Probability: 45% ‚Ä¢ Owner: RS Project Manager + Client Finance\n\n' : 'No critical risks identified at current monitoring level.\n\n'}
                
                <strong>‚ö†Ô∏è MEDIUM RISKS:</strong><br>
                ${riskLevel >= 2 ? '3. Timeline Pressure on Key Milestones\n   ‚Ä¢ Impact: Medium - Scope adjustment may be needed\n   ‚Ä¢ Probability: 60% ‚Ä¢ Mitigation: Enhanced sprint planning\n\n4. Communication Gaps Between Departments\n   ‚Ä¢ Impact: Medium - Quality degradation risk\n   ‚Ä¢ Probability: 40% ‚Ä¢ Owner: RS Change Manager\n\n' : 'Medium risks are within acceptable parameters.\n\n'}
                
                <strong>‚úÖ MITIGATED RISKS:</strong><br>
                ‚Ä¢ Budget constraints (RESOLVED - funding approved)<br>
                ‚Ä¢ Technical integration challenges (RESOLVED - APIs stable)<br>
                ‚Ä¢ Initial change resistance (RESOLVED - training completed)<br><br>
                
                <strong>üéØ IMMEDIATE ACTIONS:</strong><br>
                ${riskLevel >= 4 ? '1. Schedule emergency stakeholder session (THIS WEEK)\n2. Deploy crisis management protocol (IMMEDIATE)\n3. Escalate to RS senior leadership (TODAY)\n' : 
                  riskLevel >= 2 ? '1. Monitor stakeholder engagement levels (DAILY)\n2. Review resource allocation (WEEKLY)\n3. Enhance communication protocols (ONGOING)\n' :
                  '1. Continue standard monitoring protocols\n2. Maintain stakeholder engagement cadence\n3. Focus on milestone achievement\n'}<br>
                
                <strong>üìà RISK TREND ANALYSIS:</strong><br>
                ‚Ä¢ Risk velocity: ${riskLevel <= 2 ? 'IMPROVING' : riskLevel <= 3 ? 'STABLE' : 'DETERIORATING'}<br>
                ‚Ä¢ Client engagement health: ${window.dashboardMetrics.engagement.value}%<br>
                ‚Ä¢ Mitigation effectiveness: ${riskLevel <= 2 ? 'HIGH' : 'MODERATE'}<br><br>
                
                ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br>
                Next Risk Review: ${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toLocaleDateString()}<br>
                RS Risk Manager: COO Training Participant
            `;
            
            window.createModal('Risk Analysis Report', riskContent, 'risk');
            window.completedActivities.add('risk-report');
            window.updateProgress('tools', Math.min(window.progressTracking.tools + 15, 100));
        }

        window.exportDashboardData = function() {
            alert(`üìä Dashboard Data Exported!\n\nFile: RS_Dashboard_Export_${new Date().toISOString().split('T')[0]}.xlsx\n\nExported Metrics:\n‚Ä¢ Stakeholder Engagement: ${window.dashboardMetrics.engagement.value}%\n‚Ä¢ Milestone Progress: ${window.dashboardMetrics.milestone.value}%\n‚Ä¢ Risk Alerts: ${window.dashboardMetrics.risk.value}\n‚Ä¢ Team Utilization: ${window.dashboardMetrics.utilization.value}%\n‚Ä¢ Client Satisfaction: ${window.dashboardMetrics.satisfaction.value}\n‚Ä¢ Implementation Value: ${window.dashboardMetrics.revenue.value}M\n\nUse this data for:\n‚Ä¢ Executive briefings\n‚Ä¢ Client status meetings\n‚Ä¢ Performance tracking\n‚Ä¢ Trend analysis`);
            
            window.completedActivities.add('data-export');
        }

        // Enhanced Objection Handling
        window.handleExecutiveObjection = function(objectionType) {
            // Visual feedback
            document.querySelectorAll('.objection-scenario').forEach(scenario => {
                scenario.style.background = 'rgba(255, 255, 255, 0.05)';
            });
            event.target.style.background = 'rgba(255, 255, 255, 0.15)';

            const responses = {
                cost: {
                    framework: "REFRAME ‚Üí VALUE ‚Üí PROOF ‚Üí CLOSE",
                    response: `
                        <strong>üéØ Executive Response Framework:</strong><br><br>
                        
                        <strong>1. REFRAME THE CONVERSATION:</strong><br>
                        "You're comparing strategy consulting to transformation execution. McKinsey delivers recommendations; RS delivers embedded capability that makes you independent."<br><br>
                        
                        <strong>2. DEMONSTRATE VALUE:</strong><br>
                        "Our clients see 3x faster implementation and 40% higher sustainability rates. The premium pays for itself by month 3 through embedded capability transfer."<br><br>
                        
                        <strong>3. PROVIDE PROOF:</strong><br>
                        "TechCorp paid McKinsey $2M for digital strategy recommendations. Two years later, minimal change. We transformed their operations in 8 months with measurable ROI and self-sustaining capability."<br><br>
                        
                        <strong>4. CONFIDENT CLOSE:</strong><br>
                        "The question isn't cost‚Äîit's whether you want recommendations that create dependency, or transformation that creates independence."
                    `
                },
                proof: {
                    framework: "EVIDENCE ‚Üí METHODOLOGY ‚Üí GUARANTEES ‚Üí COMMITMENT",
                    response: `
                        <strong>üéØ Executive Response Framework:</strong><br><br>
                        
                        <strong>1. PRESENT EVIDENCE:</strong><br>
                        "Three quantified case studies: ManufacturingGiant increased efficiency 47% in 6 months. RetailChain grew digital revenue 300% in year one. TechStartup scaled 10x with zero culture degradation."<br><br>
                        
                        <strong>2. EXPLAIN METHODOLOGY:</strong><br>
                        "CPR's advantage isn't just what we do‚Äîit's how we embed capability. Your team becomes expert practitioners, not dependent clients."<br><br>
                        
                        <strong>3. OFFER GUARANTEES:</strong><br>
                        "We guarantee measurable improvement in your key metrics within 90 days, or we work additional months at no charge until achieved."<br><br>
                        
                        <strong>4. DEMONSTRATE COMMITMENT:</strong><br>
                        "Unlike traditional consulting, our success is measured by your independence, not our hours."
                    `
                },
                time: {
                    framework: "ACKNOWLEDGE ‚Üí ACCELERATE ‚Üí ADVANTAGE ‚Üí ACTION",
                    response: `
                        <strong>üéØ Executive Response Framework:</strong><br><br>
                        
                        <strong>1. ACKNOWLEDGE PRESSURE:</strong><br>
                        "I understand the urgency. That's exactly why traditional consulting won't work‚Äîyou can't afford another 18-month strategy cycle."<br><br>
                        
                        <strong>2. SHOW ACCELERATION:</strong><br>
                        "CPR delivers results 40% faster because we implement as we design. No handoff delays, no adoption gaps, no consultant dependency."<br><br>
                        
                        <strong>3. HIGHLIGHT ADVANTAGE:</strong><br>
                        "While competitors develop strategies, you'll be capturing market share with embedded transformation capabilities."<br><br>
                        
                        <strong>4. CALL FOR ACTION:</strong><br>
                        "The question is: Can you afford NOT to accelerate? Every month of delay is lost competitive advantage."
                    `
                }
            };

            const response = responses[objectionType];
            const responseDiv = document.getElementById('objection-response-framework');
            
            responseDiv.innerHTML = `
                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px;">
                    <h5>üí° ${response.framework}</h5>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; margin: 15px 0; line-height: 1.6;">
                        ${response.response}
                    </div>
                    <button class="interactive-btn" onclick="window.practiceObjectionResponse('${objectionType}')">
                        üé≠ Practice This Response
                    </button>
                </div>
            `;
            responseDiv.style.display = 'block';
            
            window.updateProgress('competitive', Math.min(window.progressTracking.competitive + 5, 100));
        }

        window.practiceObjectionResponse = function(objectionType) {
            window.createModal('Objection Handling Practice', `
                <div style="padding: 20px;">
                    <h4>üé≠ Role-Play Mode Activated!</h4>
                    <p style="margin: 15px 0;">Practice delivering this response with executive presence:</p>
                    
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üéØ Key Success Elements:</h5>
                        <ul>
                            <li><strong>Executive Presence:</strong> Confident, measured tone</li>
                            <li><strong>Specific Examples:</strong> Use concrete client results</li>
                            <li><strong>Value Redirection:</strong> Shift from cost to outcome</li>
                            <li><strong>Confident Close:</strong> End with strength and conviction</li>
                        </ul>
                    </div>
                    
                    <div style="background: rgba(243, 156, 18, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üí° Practice Tips:</h5>
                        <ul>
                            <li>Record yourself delivering the response</li>
                            <li>Practice maintaining eye contact</li>
                            <li>Use strategic pauses for emphasis</li>
                            <li>End each point before continuing</li>
                        </ul>
                    </div>
                    
                    <p><strong>Next Step:</strong> Practice this response until it feels natural and you can deliver it with confidence in any Fortune 500 boardroom.</p>
                </div>
            `, 'practice');
            
            window.completedActivities.add(`objection-${objectionType}`);
            window.updateProgress('competitive', Math.min(window.progressTracking.competitive + 10, 100));
        }

        // Knowledge Check Functions
        window.selectMasteryOption = function(questionNumber, selectedOption) {
            const correctAnswers = { 1: 1, 2: 1 }; // B for both questions
            const explanations = {
                1: "Elite COOs use systematic approaches even under pressure. Comprehensive stakeholder recalibration addresses root causes while maintaining CPR methodology integrity.",
                2: "This response demonstrates clear differentiation and value proposition. It positions RS as capability builders vs. strategy creators, which is our core competitive advantage."
            };
            
            const isCorrect = selectedOption === correctAnswers[questionNumber];
            const options = document.querySelectorAll(`#mastery-quiz-${questionNumber} .quiz-option`);
            const feedback = document.getElementById(`mastery-feedback-${questionNumber}`);
            
            // Visual feedback
            options.forEach((option, index) => {
                if (index === correctAnswers[questionNumber]) {
                    option.classList.add('correct');
                } else if (index === selectedOption && !isCorrect) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            // Show explanation
            feedback.style.display = 'block';
            feedback.style.background = isCorrect ? 'rgba(46, 204, 113, 0.2)' : 'rgba(231, 76, 60, 0.2)';
            feedback.style.padding = '15px';
            feedback.style.borderRadius = '8px';
            feedback.innerHTML = `
                <strong>${isCorrect ? '‚úÖ Correct!' : '‚ùå Incorrect'}</strong><br>
                ${explanations[questionNumber]}
            `;
            
            if (isCorrect) {
                window.completedActivities.add(`knowledge-check-${questionNumber}`);
                window.updateProgress('leadership', Math.min(window.progressTracking.leadership + 15, 100));
            }
        }

        // Progress and Insight Functions
        window.updateProgress = function(area, newValue) {
            window.progressTracking[area] = Math.min(newValue, 100);
            
            const progressBar = document.getElementById(`${area}-progress`);
            const statusDiv = document.getElementById(`${area}-status`);
            
            if (progressBar) {
                progressBar.style.width = `${newValue}%`;
            }
            
            if (statusDiv) {
                let status = '';
                if (newValue >= 90) status = 'Mastery Achieved';
                else if (newValue >= 80) status = 'Advanced';
                else if (newValue >= 70) status = 'Proficient';
                else if (newValue >= 60) status = 'Developing';
                else status = 'Foundation';
                
                statusDiv.textContent = `${newValue}% - ${status}`;
            }
            
            // Update overall mastery
            const overall = Math.round(Object.values(window.progressTracking).reduce((a, b) => a + b, 0) / 4);
            const overallElement = document.getElementById('overall-mastery');
            if (overallElement) {
                overallElement.textContent = `${overall}%`;
            }
            
            // Enable final validation if ready
            const finalBtn = document.getElementById('final-validation-btn');
            if (finalBtn && overall >= 80 && window.completedActivities.size >= 8) {
                finalBtn.disabled = false;
                finalBtn.style.background = 'linear-gradient(45deg, #27ae60, #2ecc71)';
            }
        }

        window.validateCompleteCPRMastery = function() {
            const overall = Math.round(Object.values(window.progressTracking).reduce((a, b) => a + b, 0) / 4);
            const activitiesCompleted = window.completedActivities.size;
            
            if (overall < 80 || activitiesCompleted < 8) {
                alert('Complete more activities to qualify for mastery validation. You need 80% overall progress and at least 8 completed activities.');
                return;
            }
            
            const masteryContent = `
                <div style="text-align: center; padding: 30px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">üèÜ</div>
                    <h2 style="color: #27ae60; margin-bottom: 20px;">CPR MASTERY ACHIEVED!</h2>
                    
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <h4>Competencies Certified:</h4>
                        <div style="text-align: left; margin: 15px 0;">
                            ‚úÖ <strong>CPR Framework Mastery:</strong> ${window.progressTracking.framework}%<br>
                            ‚úÖ <strong>RS Tools Proficiency:</strong> ${window.progressTracking.tools}%<br>
                            ‚úÖ <strong>Competitive Positioning:</strong> ${window.progressTracking.competitive}%<br>
                            ‚úÖ <strong>Leadership Application:</strong> ${window.progressTracking.leadership}%<br>
                        </div>
                        <div style="margin-top: 20px;">
                            <strong>Overall Mastery Score: ${overall}%</strong><br>
                            <strong>Activities Completed: ${activitiesCompleted}</strong><br>
                            <strong>Certification Date: ${new Date().toLocaleDateString()}</strong>
                        </div>
                    </div>
                    
                    <div style="background: rgba(243, 156, 18, 0.1); padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <h5>You are now qualified to:</h5>
                        <ul style="text-align: left;">
                            <li>Lead RS client implementations with confidence</li>
                            <li>Train department heads on CPR methodology</li>
                            <li>Present to Fortune 500 executives</li>
                            <li>Compete effectively against Big 3 consulting firms</li>
                            <li>Design and execute complex organizational transformations</li>
                        </ul>
                    </div>
                    
                    <button class="interactive-btn" onclick="window.proceedToLesson3()" style="margin: 10px;">
                        üöÄ Continue to Lesson 3
                    </button>
                    <button class="interactive-btn" onclick="window.generateLeadershipBlueprint()" style="margin: 10px;">
                        üìã Generate Leadership Blueprint
                    </button>
                </div>
            `;
            
            window.createModal('CPR Mastery Certification', masteryContent, 'certification');
        }

        // Utility Functions
        window.createModal = function(title, content, type) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 1000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white; padding: 30px; border-radius: 15px; max-width: 800px; 
                max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                color: #2c3e50;
            `;
            
            modalContent.innerHTML = `
                <h3 style="margin-bottom: 20px; color: ${type === 'risk' ? '#e74c3c' : type === 'assessment' ? '#3498db' : '#27ae60'};">${title}</h3>
                <div style="line-height: 1.6;">${content}</div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="this.closest('.modal').remove()" style="background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-right: 10px;">Close</button>
                    ${type !== 'certification' ? '<button onclick="window.downloadReport(\'' + type + '\')" style="background: #27ae60; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">üìÑ Download</button>' : ''}
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        window.downloadReport = function(reportType) {
            const messages = {
                assessment: 'CPR Maturity Assessment Report downloaded successfully!',
                risk: 'Risk Analysis Report downloaded successfully!',
                practice: 'Objection Handling Guide downloaded successfully!'
            };
            
            alert(`üìÑ ${messages[reportType] || 'Report downloaded successfully!'}\n\nFile saved as: RS_${reportType}_Report_${new Date().toISOString().split('T')[0]}.pdf`);
        }

        // AI Coach Functions
        window.toggleAICoach = function() {
            const bubble = document.getElementById('coach-bubble');
            bubble.style.display = bubble.style.display === 'none' ? 'block' : 'none';
        }

        window.showAICoachMessage = function(message) {
            const bubble = document.getElementById('coach-bubble');
            const messageDiv = document.getElementById('coach-message');
            
            messageDiv.textContent = message;
            bubble.style.display = 'block';
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                bubble.style.display = 'none';
            }, 5000);
        }

        // Final Functions
        window.generateLeadershipBlueprint = function() {
            const patterns = window.getUserInsights();
            
            window.createModal('Personal Leadership Blueprint', `
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 3em;">üß†</div>
                        <h3>Your Personal COO Leadership Blueprint</h3>
                    </div>
                    
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üéØ Leadership Patterns Identified:</h5>
                        <p>${patterns.length > 0 ? patterns.join(', ') : 'Complete guided journal prompts to unlock personalized insights'}</p>
                    </div>
                    
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>‚ö° Operational Strengths:</h5>
                        <p>Based on your CPR assessment and interactions, your strengths include systematic thinking, stakeholder management, and performance optimization.</p>
                    </div>
                    
                    <div style="background: rgba(243, 156, 18, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üöÄ Development Opportunities:</h5>
                        <p>Continue practicing competitive objection handling and deepen your recalibration methodology application in complex scenarios.</p>
                    </div>
                    
                    <div style="background: rgba(155, 89, 182, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h5>üìã Recommended Next Steps:</h5>
                        <ul>
                            <li>Lead a practice CPR assessment with your team</li>
                            <li>Design a competitive differentiation presentation</li>
                            <li>Practice objection handling in safe environments</li>
                            <li>Continue to Lesson 3: Cross-Department Integration</li>
                        </ul>
                    </div>
                </div>
            `, 'blueprint');
        }

        window.getUserInsights = function() {
            const patterns = [];
            
            // Analyze journal inputs
            const patternInput = document.getElementById('pattern-recognition')?.value || '';
            const stakeholderInput = document.getElementById('stakeholder-analysis')?.value || '';
            const downstreamInput = document.getElementById('downstream-effects')?.value || '';
            
            if (patternInput.length > 50) patterns.push('systematic pattern recognition');
            if (stakeholderInput.length > 50) patterns.push('stakeholder-centric thinking');
            if (downstreamInput.length > 50) patterns.push('strategic consequence awareness');
            
            return patterns;
        }

        window.submitLesson3Prep = function() {
            const challenge = document.getElementById('lesson3-prep-challenge').value;
            
            if (challenge.length < 100) {
                alert('Please provide a more detailed training session design (minimum 100 characters).');
                return;
            }
            
            alert(`üéØ Training Design Submitted Successfully!\n\nYour 90-minute sales team training session has been recorded. This preparation will be valuable for Lesson 3: Cross-Department Integration.\n\nKey elements identified in your design:\n‚Ä¢ Strategic approach to sales enablement\n‚Ä¢ Practical competitive positioning\n‚Ä¢ Interactive learning methodology\n\nYou're ready to proceed to Lesson 3!`);
            
            window.completedActivities.add('lesson3-prep');
            window.updateProgress('leadership', Math.min(window.progressTracking.leadership + 10, 100));
        }

        window.proceedToLesson3 = function() {
            alert('üöÄ Congratulations! You have completed Lesson 2: CPR Mastery.\n\nLesson 3: Cross-Department Integration & Executive Training will be available in the complete RS COO training series.\n\nYou are now qualified to begin implementing CPR methodology in real client engagements!');
        }

        // Initialize Enhanced Lesson
        window.initializeLesson = function() {
            // Set up initial progress tracking
            window.updateProgress('framework', 75);
            window.updateProgress('tools', 60);
            window.updateProgress('competitive', 85);
            window.updateProgress('leadership', 70);
            
            // Initialize assessment recommendations
            window.updateReadinessRecommendation(5.0);
            
            // Show welcome coach message
            setTimeout(() => {
                window.showAICoachMessage('Welcome to RS\'s CPR Mastery Crucible! Click any element to receive contextual guidance.');
            }, 2000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            window.initializeLesson();
        });
    </script>
</body>
</html>